<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How It Works | Morphed</title>
    <meta name="description" content="See Morphed Intelligence in action with live HubSpot data. Experience AI-powered audits, blueprints, and partner recommendations.">
    <link rel="canonical" href="https://morphed.io/how-it-works">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="app"></div>
    
    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        
        function HowItWorksPage() {
            const [input, setInput] = useState('');
            const [messages, setMessages] = useState([]);
            const [loading, setLoading] = useState(false);
            const [activeTab, setActiveTab] = useState('chat');
            const [dashboardData, setDashboardData] = useState({
                portalScore: 67,
                urgentTasks: 8,
                activeProjects: 3,
                recommendations: 5
            });
            const [proactiveAlerts, setProactiveAlerts] = useState([]);
            const messagesRef = useRef(null);

            useEffect(() => {
                if (messagesRef.current) {
                    messagesRef.current.scrollTop = messagesRef.current.scrollHeight;
                }
            }, [messages]);

            useEffect(() => {
                // Load dashboard insights on mount
                loadDashboardData();
                
                // Show proactive alert after 2 seconds for demo
                setTimeout(() => {
                    if (proactiveAlerts.length === 0) {
                        simulateProactiveAlert();
                    }
                }, 2000);
            }, []);

            const loadDashboardData = async () => {
                try {
                    const response = await fetch('/api/arbot/insights');
                    if (response.ok) {
                        const data = await response.json();
                        setDashboardData({
                            portalScore: data.portal_score || 67,
                            urgentTasks: data.urgent_tasks || 8,
                            activeProjects: data.active_projects || 3,
                            recommendations: data.recommendations || 5
                        });
                        
                        // Check for proactive alerts based on real data
                        await checkProactiveAlerts(data);
                    }
                } catch (error) {
                    // Use realistic demo data
                    setDashboardData({
                        portalScore: 67,
                        urgentTasks: 8,
                        activeProjects: 3,
                        recommendations: 5
                    });
                    
                    // Simulate proactive detection for demo
                    simulateProactiveAlert();
                }
            };

            const checkProactiveAlerts = async (portalData) => {
                try {
                    const response = await fetch('/api/arbot/proactive-scan', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ portalData })
                    });
                    
                    if (response.ok) {
                        const alert = await response.json();
                        if (alert.trigger_detected) {
                            addProactiveAlert(alert);
                        }
                    }
                } catch (error) {
                    console.log('Proactive scan unavailable');
                }
            };

            const addProactiveAlert = (alert) => {
                // Add new alert to the top of the array (latest first)
                setProactiveAlerts(prev => [{ ...alert, id: Date.now() }, ...prev]);
            };

            const simulateProactiveAlert = () => {
                // Simulate real scenarios that would trigger proactive blueprints
                const alertScenarios = [
                    {
                        trigger_detected: true,
                        severity: 'high',
                        title: 'Conversion Rate Drop Detected',
                        description: 'Your lead-to-customer conversion rate has dropped 18% this week (4.2% â†’ 3.4%)',
                        metric_change: '-18%',
                        impact: 'Potential $12,000 monthly revenue impact',
                        blueprint_type: 'conversion_optimization',
                        recommended_action: 'Generate Lead Nurturing Blueprint',
                        data_source: 'Live HubSpot Analytics'
                    },
                    {
                        trigger_detected: true,
                        severity: 'medium',
                        title: 'Pipeline Velocity Slowdown',
                        description: 'Average deal closure time increased by 23 days (45 â†’ 68 days)',
                        metric_change: '+51%',
                        impact: 'Q4 revenue targets at risk',
                        blueprint_type: 'sales_acceleration',
                        recommended_action: 'Generate Sales Process Blueprint',
                        data_source: 'Deal Pipeline Analysis'
                    }
                ];
                
                // Use first scenario for demo
                addProactiveAlert(alertScenarios[0]);
            };

            const dismissProactiveAlert = (alertId) => {
                setProactiveAlerts(prev => prev.filter(alert => alert.id !== alertId));
            };

            const generateBlueprint = async (alert) => {
                if (!alert) return;
                
                // Create compelling free blueprint message
                const blueprintMessage = `Generate a comprehensive ${alert.blueprint_type} blueprint to fix this issue: ${alert.description}. Include step-by-step implementation, ROI projections, and timeline.`;
                
                // Add to chat with free blueprint context
                const userMessage = {
                    type: 'user',
                    content: blueprintMessage,
                    timestamp: new Date().toLocaleTimeString()
                };
                
                setMessages(prev => [...prev, userMessage]);
                setLoading(true);
                dismissProactiveAlert();
                
                try {
                    const response = await fetch('/api/arbot/chat', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            message: blueprintMessage,
                            userId: 'how_it_works_demo',
                            context: {
                                source: 'free_blueprint_generation',
                                proactive_data: proactiveAlert,
                                free_blueprint: true,
                                demo_mode: true
                            }
                        })
                    });

                    if (response.ok) {
                        const data = await response.json();
                        let blueprintContent = '';
                        
                        if (data.response && typeof data.response === 'string') {
                            blueprintContent = data.response;
                        } else if (data.content && data.content.message) {
                            blueprintContent = data.content.message;
                        } else if (data.data && data.data.content) {
                            blueprintContent = data.data.content;
                        } else if (data.data && data.data.message) {
                            blueprintContent = data.data.message;
                        } else {
                            blueprintContent = 'Blueprint analysis complete - detailed recommendations have been generated for your conversion optimization strategy.';
                        }
                        
                        const arbotMessage = {
                            type: 'arbot',
                            content: blueprintContent,
                            actions: [{
                                label: 'View Implementation Plan',
                                action: 'view_details',
                                data: { blueprint_type: proactiveAlert?.blueprint_type || 'conversion_optimization' }
                            }, {
                                label: 'Create Project',
                                action: 'create_project',
                                data: { blueprint_type: proactiveAlert?.blueprint_type || 'conversion_optimization' }
                            }],
                            timestamp: new Date().toLocaleTimeString(),
                            data: data.data || data.content
                        };
                        setMessages(prev => [...prev, arbotMessage]);
                        
                        // Scroll to chat to show the generated blueprint
                        setTimeout(() => {
                            const chatSection = document.querySelector('.h-96.overflow-y-auto');
                            if (chatSection) {
                                chatSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                            }
                        }, 500);
                    }
                } catch (error) {
                    console.log('Free blueprint generation error:', error);
                } finally {
                    setLoading(false);
                }
            };

            const executeProactiveBlueprint = async () => {
                if (!proactiveAlert) return;
                
                const blueprintMessage = `Show me detailed analysis of: ${proactiveAlert.description}`;
                
                // Add to chat
                const userMessage = {
                    type: 'user',
                    content: blueprintMessage,
                    timestamp: new Date().toLocaleTimeString()
                };
                
                setMessages(prev => [...prev, userMessage]);
                setLoading(true);
                dismissProactiveAlert();
                
                try {
                    const response = await fetch('/api/arbot/chat', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            message: blueprintMessage,
                            userId: 'how_it_works_demo',
                            context: {
                                source: 'proactive_alert_details',
                                proactive_data: proactiveAlert,
                                demo_mode: true
                            }
                        })
                    });

                    if (response.ok) {
                        const data = await response.json();
                        const arbotMessage = {
                            type: 'arbot',
                            content: data.response || data.content || 'Analysis complete',
                            actions: data.actions || [],
                            timestamp: new Date().toLocaleTimeString()
                        };
                        setMessages(prev => [...prev, arbotMessage]);
                    }
                } catch (error) {
                    console.log('Details analysis error:', error);
                    const errorMessage = {
                        type: 'arbot',
                        content: 'I encountered an issue analyzing this alert. Please try again or contact support.',
                        actions: [],
                        timestamp: new Date().toLocaleTimeString()
                    };
                    setMessages(prev => [...prev, errorMessage]);
                } finally {
                    setLoading(false);
                }
            };

            const sendMessage = async () => {
                if (!input.trim() || loading) return;

                const userMessage = {
                    type: 'user',
                    content: input,
                    timestamp: new Date().toLocaleTimeString()
                };

                setMessages(prev => [...prev, userMessage]);
                setLoading(true);
                setInput('');

                try {
                    const response = await fetch('/api/arbot/chat', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            message: input,
                            userId: 'how_it_works_demo',
                            context: {
                                source: 'how_it_works_demo',
                                full_features: true,
                                demo_mode: true
                            }
                        })
                    });

                    if (response.ok) {
                        const data = await response.json();
                        const arbotMessage = {
                            type: 'arbot',
                            content: data.response?.message || data.response || 'Response received successfully.',
                            timestamp: new Date().toLocaleTimeString(),
                            data: data.data,
                            actions: data.actions
                        };
                        setMessages(prev => [...prev, arbotMessage]);
                    } else {
                        throw new Error('Failed to get response');
                    }
                } catch (error) {
                    const errorMessage = {
                        type: 'arbot',
                        content: 'Unable to process your request. Please try again.',
                        timestamp: new Date().toLocaleTimeString()
                    };
                    setMessages(prev => [...prev, errorMessage]);
                }

                setLoading(false);
            };

            const handleKeyPress = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            };

            return React.createElement('div', { className: "min-h-screen bg-gray-50" },
                // Header
                React.createElement('nav', { className: "bg-white shadow-sm border-b border-gray-200" },
                    React.createElement('div', { className: "max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" },
                        React.createElement('div', { className: "flex justify-between items-center h-16" },
                            React.createElement('a', { href: "/", className: "flex items-center gap-3" },
                                React.createElement('div', { className: "bg-blue-600 text-white p-2 rounded-lg" },
                                    React.createElement('svg', { className: "w-6 h-6", fill: "currentColor", viewBox: "0 0 24 24" },
                                        React.createElement('path', { d: "M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" })
                                    )
                                ),
                                React.createElement('span', { className: "text-xl font-bold text-gray-900" }, "Morphed")
                            ),
                            React.createElement('div', { className: "flex items-center" },
                                // Desktop menu
                                React.createElement('div', { className: "hidden md:flex items-center space-x-8" },
                                    React.createElement('a', { href: "/about", className: "text-gray-600 hover:text-gray-900" }, "About"),
                                    React.createElement('a', { href: "/how-it-works", className: "text-gray-900 font-semibold" }, "How It Works"),
                                    React.createElement('a', { href: "/pricing", className: "text-gray-600 hover:text-gray-900" }, "Pricing"),
                                    React.createElement('a', { href: "/auth/login", className: "bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700" }, "Sign In")
                                ),
                                // Mobile menu button
                                React.createElement('button', { 
                                    className: "md:hidden p-2 rounded-lg hover:bg-gray-100",
                                    onClick: () => {
                                        const menu = document.getElementById('mobile-menu');
                                        if (menu) {
                                            menu.classList.toggle('hidden');
                                        }
                                    }
                                },
                                    React.createElement('svg', { className: "w-6 h-6", fill: "none", stroke: "currentColor", viewBox: "0 0 24 24" },
                                        React.createElement('path', { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: "2", d: "M4 6h16M4 12h16m-7 6h7" })
                                    )
                                )
                            ),
                            // Mobile menu
                            React.createElement('div', { 
                                id: "mobile-menu",
                                className: "absolute top-16 left-0 right-0 bg-white shadow-lg border-t border-gray-200 md:hidden hidden"
                            },
                                React.createElement('div', { className: "px-4 py-6 space-y-4" },
                                    React.createElement('a', { href: "/about", className: "block text-gray-600 hover:text-gray-900 py-2" }, "About"),
                                    React.createElement('a', { href: "/how-it-works", className: "block text-gray-900 font-semibold py-2" }, "How It Works"),
                                    React.createElement('a', { href: "/pricing", className: "block text-gray-600 hover:text-gray-900 py-2" }, "Pricing"),
                                    React.createElement('a', { href: "/auth/login", className: "block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-center" }, "Sign In")
                                )
                            )
                        )
                    )
                ),

                // Hero Section
                React.createElement('div', { className: "bg-gradient-to-br from-blue-50 to-purple-50 py-8" },
                    React.createElement('div', { className: "max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center" },
                        React.createElement('h1', { className: "text-3xl md:text-4xl font-bold text-gray-900 mb-4" },
                            "Experience Morphed Intelligence"
                        ),
                        React.createElement('p', { className: "text-lg text-gray-600 max-w-3xl mx-auto mb-6" },
                            "This is the exact same dashboard you'll use after signing up. Real portal analysis, live project management, and AI-powered insights."
                        )
                    )
                ),

                // Full Dashboard Interface
                React.createElement('div', { className: "max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6" },
                    // Proactive Blueprint Alert Bars - Stacked with latest first
                    proactiveAlerts.length > 0 && React.createElement('div', { className: "mb-6 space-y-4" },
                        ...proactiveAlerts.map(alert => React.createElement('div', { 
                            key: alert.id,
                            className: `bg-gradient-to-r ${
                                alert.severity === 'high' 
                                    ? 'from-red-50 to-orange-50 border-red-200' 
                                    : 'from-yellow-50 to-amber-50 border-yellow-200'
                            } border rounded-xl p-6 shadow-lg`
                        },
                        React.createElement('div', { className: "flex items-start gap-4" },
                            // Alert Icon
                            React.createElement('div', { 
                                className: `flex-shrink-0 p-2 rounded-lg ${
                                    alert.severity === 'high' 
                                        ? 'bg-red-100' 
                                        : 'bg-yellow-100'
                                }`
                            },
                                React.createElement('svg', { 
                                    className: `w-6 h-6 ${
                                        alert.severity === 'high' 
                                            ? 'text-red-600' 
                                            : 'text-yellow-600'
                                    }`, 
                                    fill: "currentColor", 
                                    viewBox: "0 0 24 24" 
                                },
                                    React.createElement('path', { d: "M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" })
                                )
                            ),
                            // Alert Content
                            React.createElement('div', { className: "flex-1" },
                                React.createElement('div', { className: "flex items-center gap-2 mb-2" },
                                    React.createElement('h3', { className: "text-lg font-semibold text-gray-900" }, 
                                        alert.title
                                    ),
                                    React.createElement('span', { 
                                        className: `px-2 py-1 text-xs font-medium rounded-full ${
                                            alert.severity === 'high' 
                                                ? 'bg-red-100 text-red-800' 
                                                : 'bg-yellow-100 text-yellow-800'
                                        }`
                                    }, alert.severity.toUpperCase()),
                                    React.createElement('span', { 
                                        className: `px-2 py-1 text-xs font-bold rounded-full ${
                                            alert.metric_change.startsWith('-') 
                                                ? 'bg-red-200 text-red-900' 
                                                : 'bg-orange-200 text-orange-900'
                                        }`
                                    }, alert.metric_change)
                                ),
                                React.createElement('p', { className: "text-gray-700 mb-2" }, 
                                    alert.description
                                ),
                                React.createElement('div', { className: "flex items-center gap-4 text-sm mb-3" },
                                    React.createElement('span', { className: "text-gray-600" },
                                        `ðŸ’¡ ${alert.impact}`
                                    ),
                                    React.createElement('span', { className: "text-gray-500" },
                                        `ðŸ“Š ${alert.data_source}`
                                    )
                                ),
                                // Action Buttons
                                React.createElement('div', { className: "flex gap-3" },
                                    React.createElement('button', {
                                        onClick: () => generateBlueprint(alert),
                                        className: "px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 font-semibold text-sm transition-colors shadow-md border-2 border-blue-600 hover:shadow-lg"
                                    }, "ðŸš€ Generate Your Blueprint"),
                                    React.createElement('button', {
                                        onClick: () => {
                                            setInput(`Show me detailed analysis of this issue: ${alert.description}`);
                                            setTimeout(() => sendMessage(), 100);
                                        },
                                        className: "px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 font-medium text-sm transition-colors"
                                    }, "View Details"),
                                    React.createElement('button', {
                                        onClick: () => dismissProactiveAlert(alert.id),
                                        className: "px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium text-sm transition-colors"
                                    }, "Dismiss")
                                )
                            )
                        ))
                    ),
                    // Dashboard Header with Stats - exactly like authenticated version
                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-4 gap-6 mb-8" },
                        React.createElement('div', { 
                            className: "bg-white p-6 rounded-xl shadow-sm border border-gray-200 cursor-pointer hover:shadow-md transition-shadow",
                            onClick: () => {
                                setInput("Analyze my portal score of 67/100 and provide detailed recommendations for improvement");
                                setTimeout(() => sendMessage(), 100);
                            }
                        },
                            React.createElement('div', { className: "flex items-center justify-between" },
                                React.createElement('div', null,
                                    React.createElement('p', { className: "text-sm font-medium text-gray-600" }, "Portal Score"),
                                    React.createElement('p', { className: "text-2xl font-bold text-gray-900" }, `${dashboardData.portalScore}/100`)
                                ),
                                React.createElement('div', { className: "p-2 bg-blue-100 rounded-lg" },
                                    React.createElement('svg', { className: "w-6 h-6 text-blue-600", fill: "currentColor", viewBox: "0 0 24 24" },
                                        React.createElement('path', { d: "M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" })
                                    )
                                )
                            )
                        ),
                        React.createElement('div', { 
                            className: "bg-white p-6 rounded-xl shadow-sm border border-gray-200 cursor-pointer hover:shadow-md transition-shadow",
                            onClick: () => {
                                setInput("Show me my urgent tasks and deadlines");
                                setTimeout(() => sendMessage(), 100);
                            }
                        },
                            React.createElement('div', { className: "flex items-center justify-between" },
                                React.createElement('div', null,
                                    React.createElement('p', { className: "text-sm font-medium text-gray-600" }, "Urgent Tasks"),
                                    React.createElement('p', { className: "text-2xl font-bold text-orange-600" }, dashboardData.urgentTasks)
                                ),
                                React.createElement('div', { className: "p-2 bg-orange-100 rounded-lg" },
                                    React.createElement('svg', { className: "w-6 h-6 text-orange-600", fill: "currentColor", viewBox: "0 0 24 24" },
                                        React.createElement('path', { d: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" })
                                    )
                                )
                            )
                        ),
                        React.createElement('div', { 
                            className: "bg-white p-6 rounded-xl shadow-sm border border-gray-200 cursor-pointer hover:shadow-md transition-shadow",
                            onClick: () => {
                                setInput("Show me the status and progress of my active projects");
                                setTimeout(() => sendMessage(), 100);
                            }
                        },
                            React.createElement('div', { className: "flex items-center justify-between" },
                                React.createElement('div', null,
                                    React.createElement('p', { className: "text-sm font-medium text-gray-600" }, "Active Projects"),
                                    React.createElement('p', { className: "text-2xl font-bold text-green-600" }, dashboardData.activeProjects)
                                ),
                                React.createElement('div', { className: "p-2 bg-green-100 rounded-lg" },
                                    React.createElement('svg', { className: "w-6 h-6 text-green-600", fill: "currentColor", viewBox: "0 0 24 24" },
                                        React.createElement('path', { d: "M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" })
                                    )
                                )
                            )
                        ),
                        React.createElement('div', { 
                            className: "bg-white p-6 rounded-xl shadow-sm border border-gray-200 cursor-pointer hover:shadow-md transition-shadow",
                            onClick: () => {
                                setInput("Show me all my personalized recommendations and their impact on my business");
                                setTimeout(() => sendMessage(), 100);
                            }
                        },
                            React.createElement('div', { className: "flex items-center justify-between" },
                                React.createElement('div', null,
                                    React.createElement('p', { className: "text-sm font-medium text-gray-600" }, "Recommendations"),
                                    React.createElement('p', { className: "text-2xl font-bold text-purple-600" }, dashboardData.recommendations)
                                ),
                                React.createElement('div', { className: "p-2 bg-purple-100 rounded-lg" },
                                    React.createElement('svg', { className: "w-6 h-6 text-purple-600", fill: "currentColor", viewBox: "0 0 24 24" },
                                        React.createElement('path', { d: "M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" })
                                    )
                                )
                            )
                        )
                    ),

                    // Tab Navigation - exactly like dashboard
                    React.createElement('div', { className: "border-b border-gray-200 mb-6" },
                        React.createElement('nav', { className: "-mb-px flex space-x-8" },
                            React.createElement('button', {
                                onClick: () => setActiveTab('chat'),
                                className: `py-2 px-1 border-b-2 font-medium text-sm ${
                                    activeTab === 'chat' 
                                        ? 'border-blue-500 text-blue-600' 
                                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                                }`
                            }, "AI Assistant"),
                            React.createElement('button', {
                                onClick: () => setActiveTab('projects'),
                                className: `py-2 px-1 border-b-2 font-medium text-sm ${
                                    activeTab === 'projects' 
                                        ? 'border-blue-500 text-blue-600' 
                                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                                }`
                            }, "Projects"),
                            React.createElement('button', {
                                onClick: () => setActiveTab('tasks'),
                                className: `py-2 px-1 border-b-2 font-medium text-sm ${
                                    activeTab === 'tasks' 
                                        ? 'border-blue-500 text-blue-600' 
                                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                                }`
                            }, "Tasks"),
                            React.createElement('button', {
                                onClick: () => setActiveTab('insights'),
                                className: `py-2 px-1 border-b-2 font-medium text-sm ${
                                    activeTab === 'insights' 
                                        ? 'border-blue-500 text-blue-600' 
                                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                                }`
                            }, "Insights")
                        )
                    ),

                    // Tab Content
                    activeTab === 'chat' && React.createElement('div', { className: "space-y-6" },
                        // Quick Action Buttons - exactly like dashboard
                        React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3" },
                            React.createElement('button', {
                                onClick: () => {
                                    setInput("Run a comprehensive audit of my HubSpot portal");
                                    setTimeout(() => sendMessage(), 100);
                                },
                                className: "p-4 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-xl border border-blue-200 text-left transition-colors shadow-sm"
                            }, "ðŸ” Run Portal Audit"),
                            React.createElement('button', {
                                onClick: () => {
                                    setInput("Generate a strategic blueprint for my business goals");
                                    setTimeout(() => sendMessage(), 100);
                                },
                                className: "p-4 bg-green-50 hover:bg-green-100 text-green-700 rounded-xl border border-green-200 text-left transition-colors shadow-sm"
                            }, "ðŸ“‹ Generate Blueprint"),
                            React.createElement('button', {
                                onClick: () => {
                                    setInput("Show me my urgent tasks and deadlines");
                                    setTimeout(() => sendMessage(), 100);
                                },
                                className: "p-4 bg-orange-50 hover:bg-orange-100 text-orange-700 rounded-xl border border-orange-200 text-left transition-colors shadow-sm"
                            }, "âš¡ View Urgent Tasks"),
                            React.createElement('button', {
                                onClick: () => {
                                    setInput("Analyze my performance metrics and suggest improvements");
                                    setTimeout(() => sendMessage(), 100);
                                },
                                className: "p-4 bg-purple-50 hover:bg-purple-100 text-purple-700 rounded-xl border border-purple-200 text-left transition-colors shadow-sm"
                            }, "ðŸ“Š Conversion Analysis"),
                            React.createElement('button', {
                                onClick: () => {
                                    setInput("Recommend implementation partners for my project");
                                    setTimeout(() => sendMessage(), 100);
                                },
                                className: "p-4 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 rounded-xl border border-indigo-200 text-left transition-colors shadow-sm"
                            }, "ðŸ¤ Partner Recommendations"),
                            React.createElement('button', {
                                onClick: () => {
                                    setInput("Create a comprehensive project implementation plan");
                                    setTimeout(() => sendMessage(), 100);
                                },
                                className: "p-4 bg-pink-50 hover:bg-pink-100 text-pink-700 rounded-xl border border-pink-200 text-left transition-colors shadow-sm"
                            }, "ðŸš€ Project Planning")
                        ),

                        // Chat Interface - exactly like dashboard
                        React.createElement('div', { className: "bg-white rounded-2xl shadow-lg border border-gray-200" },
                            // Messages Area
                            React.createElement('div', { className: "h-96 overflow-y-auto p-6" },
                                React.createElement('div', { ref: messagesRef, className: "space-y-4" },
                                    messages.length === 0 && React.createElement('div', { className: "text-center text-gray-500 py-16" },
                                        React.createElement('div', { className: "mb-4" },
                                            React.createElement('svg', { className: "w-12 h-12 mx-auto text-gray-300", fill: "currentColor", viewBox: "0 0 24 24" },
                                                React.createElement('path', { d: "M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" })
                                            )
                                        ),
                                        React.createElement('p', { className: "text-gray-500" }, "Start a conversation to see"),
                                        React.createElement('p', { className: "text-gray-500 font-medium" }, "Morphed Intelligence in action")
                                    ),
                                    ...messages.map((message, index) =>
                                        React.createElement('div', { 
                                            key: index, 
                                            className: `flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`
                                        },
                                            React.createElement('div', { 
                                                className: `max-w-3xl rounded-2xl p-4 ${
                                                    message.type === 'user' 
                                                        ? 'bg-blue-600 text-white ml-12' 
                                                        : 'bg-gray-100 text-gray-900 mr-12'
                                                }`
                                            },
                                                message.type === 'arbot' && React.createElement('div', { className: "flex items-center gap-2 mb-2" },
                                                    React.createElement('div', { className: "w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center" },
                                                        React.createElement('svg', { className: "w-3 h-3 text-white", fill: "currentColor", viewBox: "0 0 24 24" },
                                                            React.createElement('path', { d: "M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" })
                                                        )
                                                    ),
                                                    React.createElement('span', { className: "text-sm font-medium text-gray-700" }, "Morphed Intelligence")
                                                ),
                                                message.content && message.content.includes('urgent tasks and deadlines') ? 
                                                    renderTaskUI(message.content) : 
                                                    React.createElement('div', { className: "whitespace-pre-wrap leading-relaxed" }, message.content || ''),
                                                message.actions && Array.isArray(message.actions) && message.actions.length > 0 && React.createElement('div', { className: "mt-3 flex flex-wrap gap-2" },
                                                    ...message.actions.map((action, actionIndex) =>
                                                        React.createElement('button', {
                                                            key: actionIndex,
                                                            className: "px-3 py-1 bg-blue-100 text-blue-700 rounded-lg text-sm hover:bg-blue-200 transition-colors"
                                                        }, action.label || 'Action')
                                                    )
                                                )
                                            )
                                        )
                                    ),
                                    loading && React.createElement('div', { className: "flex justify-start" },
                                        React.createElement('div', { className: "bg-gray-100 rounded-2xl p-4 mr-12" },
                                            React.createElement('div', { className: "flex items-center gap-2 mb-2" },
                                                React.createElement('div', { className: "w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center" },
                                                    React.createElement('svg', { className: "w-3 h-3 text-white", fill: "currentColor", viewBox: "0 0 24 24" },
                                                        React.createElement('path', { d: "M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" })
                                                    )
                                                ),
                                                React.createElement('span', { className: "text-sm font-medium text-gray-700" }, "Morphed Intelligence")
                                            ),
                                            React.createElement('div', { className: "flex items-center gap-2" },
                                                React.createElement('div', { className: "flex gap-1" },
                                                    React.createElement('div', { className: "w-2 h-2 bg-blue-600 rounded-full animate-bounce" }),
                                                    React.createElement('div', { 
                                                        className: "w-2 h-2 bg-blue-600 rounded-full animate-bounce",
                                                        style: { animationDelay: '0.1s' }
                                                    }),
                                                    React.createElement('div', { 
                                                        className: "w-2 h-2 bg-blue-600 rounded-full animate-bounce",
                                                        style: { animationDelay: '0.2s' }
                                                    })
                                                ),
                                                React.createElement('span', { className: "text-sm text-gray-500" }, "Analyzing...")
                                            )
                                        )
                                    )
                                )
                            ),
                            // Input Area - exactly like dashboard
                            React.createElement('div', { className: "border-t border-gray-200 p-4" },
                                React.createElement('div', { className: "flex gap-3" },
                                    React.createElement('textarea', {
                                        value: input,
                                        onChange: (e) => setInput(e.target.value),
                                        onKeyPress: handleKeyPress,
                                        placeholder: "Ask about audits, blueprints, projects, or partner recommendations...",
                                        className: "flex-1 resize-none border border-gray-300 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                        rows: 1,
                                        disabled: loading
                                    }),
                                    React.createElement('button', {
                                        onClick: sendMessage,
                                        disabled: !input.trim() || loading,
                                        className: "px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                                    }, "Send")
                                )
                            )
                        )
                    ),

                    // Projects Tab - exactly like dashboard
                    activeTab === 'projects' && React.createElement('div', { className: "space-y-6" },
                        React.createElement('div', { className: "grid grid-cols-1 lg:grid-cols-2 gap-6" },
                            React.createElement('div', { 
                                className: "bg-white p-6 rounded-xl shadow-sm border border-gray-200 cursor-pointer hover:shadow-md transition-shadow",
                                onClick: () => setExpandedProject(expandedProject === 'lead_nurturing' ? null : 'lead_nurturing')
                            },
                                React.createElement('div', { className: "flex items-center justify-between mb-4" },
                                    React.createElement('h3', { className: "text-lg font-semibold text-gray-900" }, "Lead Nurturing Automation"),
                                    React.createElement('svg', {
                                        className: `w-5 h-5 text-gray-400 transition-transform ${expandedProject === 'lead_nurturing' ? 'transform rotate-180' : ''}`,
                                        fill: 'none',
                                        stroke: 'currentColor',
                                        viewBox: '0 0 24 24'
                                    },
                                        React.createElement('path', {
                                            strokeLinecap: 'round',
                                            strokeLinejoin: 'round',
                                            strokeWidth: 2,
                                            d: 'M19 9l-7 7-7-7'
                                        })
                                    )
                                ),
                                React.createElement('div', { className: "space-y-3" },
                                    React.createElement('div', { className: "flex items-center justify-between" },
                                        React.createElement('span', { className: "text-sm text-gray-600" }, "Progress"),
                                        React.createElement('span', { className: "text-sm font-medium text-green-600" }, "75%")
                                    ),
                                    React.createElement('div', { className: "w-full bg-gray-200 rounded-full h-2" },
                                        React.createElement('div', { className: "bg-green-500 h-2 rounded-full", style: { width: '75%' } })
                                    ),
                                    React.createElement('div', { className: "flex items-center gap-2 text-sm text-gray-600" },
                                        React.createElement('svg', { className: "w-4 h-4", fill: "currentColor", viewBox: "0 0 24 24" },
                                            React.createElement('path', { d: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" })
                                        ),
                                        "Due: June 15, 2025"
                                    )
                                )
                            ),
                            React.createElement('div', { className: "bg-white p-6 rounded-xl shadow-sm border border-gray-200" },
                                React.createElement('h3', { className: "text-lg font-semibold text-gray-900 mb-4" }, "Sales Process Optimization"),
                                React.createElement('div', { className: "space-y-3" },
                                    React.createElement('div', { className: "flex items-center justify-between" },
                                        React.createElement('span', { className: "text-sm text-gray-600" }, "Progress"),
                                        React.createElement('span', { className: "text-sm font-medium text-blue-600" }, "45%")
                                    ),
                                    React.createElement('div', { className: "w-full bg-gray-200 rounded-full h-2" },
                                        React.createElement('div', { className: "bg-blue-500 h-2 rounded-full", style: { width: '45%' } })
                                    ),
                                    React.createElement('div', { className: "flex items-center gap-2 text-sm text-gray-600" },
                                        React.createElement('svg', { className: "w-4 h-4", fill: "currentColor", viewBox: "0 0 24 24" },
                                            React.createElement('path', { d: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" })
                                        ),
                                        "Due: July 1, 2025"
                                    )
                                )
                            ),
                            React.createElement('div', { className: "bg-white p-6 rounded-xl shadow-sm border border-gray-200" },
                                React.createElement('h3', { className: "text-lg font-semibold text-gray-900 mb-4" }, "Customer Success Platform"),
                                React.createElement('div', { className: "space-y-3" },
                                    React.createElement('div', { className: "flex items-center justify-between" },
                                        React.createElement('span', { className: "text-sm text-gray-600" }, "Progress"),
                                        React.createElement('span', { className: "text-sm font-medium text-orange-600" }, "25%")
                                    ),
                                    React.createElement('div', { className: "w-full bg-gray-200 rounded-full h-2" },
                                        React.createElement('div', { className: "bg-orange-500 h-2 rounded-full", style: { width: '25%' } })
                                    ),
                                    React.createElement('div', { className: "flex items-center gap-2 text-sm text-gray-600" },
                                        React.createElement('svg', { className: "w-4 h-4", fill: "currentColor", viewBox: "0 0 24 24" },
                                            React.createElement('path', { d: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" })
                                        ),
                                        "Due: August 10, 2025"
                                    )
                                )
                            )
                        )
                    ),

                    // Tasks Tab - exactly like dashboard
                    activeTab === 'tasks' && React.createElement('div', { className: "space-y-4" },
                        React.createElement('div', { className: "bg-white rounded-xl shadow-sm border border-gray-200" },
                            React.createElement('div', { className: "p-4 border-b border-gray-200" },
                                React.createElement('h3', { className: "text-lg font-semibold text-gray-900" }, "Urgent Tasks")
                            ),
                            React.createElement('div', { className: "p-4 space-y-4" },
                                React.createElement('div', { className: "flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200" },
                                    React.createElement('div', null,
                                        React.createElement('p', { className: "font-medium text-red-900" }, "Configure lead scoring automation"),
                                        React.createElement('p', { className: "text-sm text-red-600" }, "Lead Nurturing Automation â€¢ Overdue by 2 days")
                                    ),
                                    React.createElement('span', { className: "px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full" }, "Urgent")
                                ),
                                React.createElement('div', { className: "flex items-center justify-between p-3 bg-orange-50 rounded-lg border border-orange-200" },
                                    React.createElement('div', null,
                                        React.createElement('p', { className: "font-medium text-orange-900" }, "Deploy HubSpot predictive lead scoring"),
                                        React.createElement('p', { className: "text-sm text-orange-600" }, "Sales Process Optimization â€¢ Due today")
                                    ),
                                    React.createElement('span', { className: "px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full" }, "High")
                                ),
                                React.createElement('div', { className: "flex items-center justify-between p-3 bg-yellow-50 rounded-lg border border-yellow-200" },
                                    React.createElement('div', null,
                                        React.createElement('p', { className: "font-medium text-yellow-900" }, "Build HubSpot Service onboarding pipeline"),
                                        React.createElement('p', { className: "text-sm text-yellow-600" }, "Customer Success Platform â€¢ Due June 10")
                                    ),
                                    React.createElement('span', { className: "px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full" }, "Medium")
                                )
                            )
                        )
                    ),

                    // Insights Tab - exactly like dashboard
                    activeTab === 'insights' && React.createElement('div', { className: "space-y-6" },
                        React.createElement('div', { className: "grid grid-cols-1 lg:grid-cols-2 gap-6" },
                            React.createElement('div', { 
                                className: "bg-white p-6 rounded-xl shadow-sm border border-gray-200 cursor-pointer hover:shadow-md transition-shadow",
                                onClick: () => {
                                    setInput("Explain my portal health score of 67/100 - what does this mean, what areas need improvement, and why is this important for my business?");
                                    setTimeout(() => sendMessage(), 100);
                                }
                            },
                                React.createElement('h3', { className: "text-lg font-semibold text-gray-900 mb-4" }, "Portal Health Score"),
                                React.createElement('div', { className: "text-center" },
                                    React.createElement('div', { className: "text-4xl font-bold text-orange-600 mb-2" }, `${dashboardData.portalScore}/100`),
                                    React.createElement('p', { className: "text-gray-600" }, "Needs optimization in lead scoring and automation workflows"),
                                    React.createElement('p', { className: "text-xs text-blue-600 mt-2" }, "Click for detailed analysis")
                                )
                            ),
                            React.createElement('div', { className: "bg-white p-6 rounded-xl shadow-sm border border-gray-200" },
                                React.createElement('h3', { className: "text-lg font-semibold text-gray-900 mb-4" }, "Top Recommendations"),
                                React.createElement('div', { className: "space-y-3" },
                                    React.createElement('div', { 
                                        className: "flex items-start gap-3 p-3 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors border border-transparent hover:border-blue-200",
                                        onClick: () => {
                                            setInput("Show me how to implement predictive lead scoring and what impact it will have on my conversion rates");
                                            setTimeout(() => sendMessage(), 100);
                                        }
                                    },
                                        React.createElement('div', { className: "w-2 h-2 bg-blue-500 rounded-full mt-2" }),
                                        React.createElement('p', { className: "text-sm text-gray-700" }, "Implement predictive lead scoring to improve conversion rates by 25%")
                                    ),
                                    React.createElement('div', { 
                                        className: "flex items-start gap-3 p-3 rounded-lg hover:bg-green-50 cursor-pointer transition-colors border border-transparent hover:border-green-200",
                                        onClick: () => {
                                            setInput("Guide me through deploying marketing automation workflows and show the impact on reducing manual tasks");
                                            setTimeout(() => sendMessage(), 100);
                                        }
                                    },
                                        React.createElement('div', { className: "w-2 h-2 bg-green-500 rounded-full mt-2" }),
                                        React.createElement('p', { className: "text-sm text-gray-700" }, "Deploy marketing automation workflows to reduce manual tasks")
                                    ),
                                    React.createElement('div', { 
                                        className: "flex items-start gap-3 p-3 rounded-lg hover:bg-purple-50 cursor-pointer transition-colors border border-transparent hover:border-purple-200",
                                        onClick: () => {
                                            setInput("Help me configure customer success workflows to reduce churn by 15% - show me the implementation steps");
                                            setTimeout(() => sendMessage(), 100);
                                        }
                                    },
                                        React.createElement('div', { className: "w-2 h-2 bg-purple-500 rounded-full mt-2" }),
                                        React.createElement('p', { className: "text-sm text-gray-700" }, "Configure customer success workflows to reduce churn by 15%")
                                    )
                                )
                            )
                        )
                    )
                ),

                // Footer CTA
                React.createElement('div', { className: "bg-gradient-to-r from-blue-600 to-purple-600 text-white py-12 mt-12" },
                    React.createElement('div', { className: "max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center" },
                        React.createElement('h2', { className: "text-2xl md:text-3xl font-bold mb-4" },
                            "Ready to Transform Your HubSpot?"
                        ),
                        React.createElement('p', { className: "text-lg mb-8 opacity-90" },
                            "This is exactly what you'll get with Morphed Intelligence. No setup required - just connect your HubSpot and start optimizing immediately."
                        ),
                        React.createElement('div', { className: "flex flex-col sm:flex-row gap-4 justify-center" },
                            React.createElement('a', { 
                                href: "/auth/login",
                                className: "bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors"
                            }, "Start Your Optimization"),
                            React.createElement('a', { 
                                href: "/pricing",
                                className: "border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors"
                            }, "View Pricing")
                        )
                    )
                )
            );
        }

        ReactDOM.render(React.createElement(HowItWorksPage), document.getElementById('app'));
    </script>
</body>
</html>